const floors=document.querySelectorAll(".image path"),counter=document.querySelector(".counter-level"),counterUp=document.querySelector(".counter-btn-up"),counterDown=document.querySelector(".counter-btn-down"),modal=document.querySelector(".modal"),modalFloor=document.querySelector(".floor-number"),modalOpenBtn=document.querySelector(".modal-open-btn"),modalCloseBtn=document.querySelector(".modal-close-btn"),flats=document.querySelectorAll(".flat-number"),flatsImages=document.querySelectorAll(".floor path");let currentFloor,currentFlat;const modalToggle=()=>{modal.classList.toggle("is-open")},changeAttribute=(t,e,o)=>{t.forEach(t=>{t.getAttribute(`data-${e}`)==o?t.classList.add(`current-${e}`):t.classList.remove(`current-${e}`)})};changeAttribute(floors,"floor",counter.textContent);const addFlatListListener=()=>{for(flat of flats){let t,e=Number(modalFloor.textContent),o=[...flats].indexOf(flat)+1;t=e<10?10*e+o:100*e+o,flat.textContent=t,flat.parentNode.addEventListener("mouseover",()=>{changeAttribute(flatsImages,"flat",o)}),flat.parentNode.addEventListener("mouseout",()=>{changeAttribute(flatsImages,"flat",0)})}},addFlatImagesListener=()=>{for(path of flatsImages){let t=path.getAttribute("data-flat");path.addEventListener("mouseover",()=>{changeAttribute(flatsImages,"flat",t),flats[t-1].parentNode.classList.add("flat-link-current")}),path.addEventListener("mouseout",()=>{changeAttribute(flatsImages,"flat",0),flats[t-1].parentNode.classList.remove("flat-link-current")})}},modalCallback=()=>{modalToggle(),modalFloor.textContent=counter.textContent,addFlatListListener(),addFlatImagesListener()};modalCloseBtn.addEventListener("click",()=>{modalToggle(),modalCloseBtn.removeEventListener("click",modalCallback)}),modalOpenBtn.addEventListener("click",modalCallback);const isEscEvent=t=>"Escape"===t.key;document.addEventListener("keydown",t=>{isEscEvent(t)&&(modalToggle(),modalCloseBtn.removeEventListener("click",modalCallback))}),floors.forEach(t=>{t.addEventListener("mouseover",()=>{currentFloor=t.getAttribute("data-floor"),counter.textContent=currentFloor,changeAttribute(floors,"floor",currentFloor)}),t.addEventListener("click",modalCallback)}),counterUp.addEventListener("click",()=>{currentFloor=counter.textContent,Number(currentFloor)<18&&(currentFloor++,counter.textContent=String(currentFloor).padStart(2,"0"),changeAttribute(floors,"floor",currentFloor))}),counterDown.addEventListener("click",()=>{currentFloor=counter.textContent,Number(currentFloor)>2&&(currentFloor--,counter.textContent=String(currentFloor).padStart(2,"0"),changeAttribute(floors,"floor",currentFloor))});